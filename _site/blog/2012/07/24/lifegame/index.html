
<!DOCTYPE html>
<html lang="ZH-CN">
  <head>
    <meta charset="utf-8">
    <title>LifeGame</title>
    <meta name="description" content="生命游戏">
    <meta name="author" content="NanQi">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/twitter/css/prettify.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/twitter/css/docs.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="/">南琦的博客</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              
              
              


  
    
      
      	
      	<li>
            <a href="/archive.html">
                归档
                
                
            </a>
        </li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li>
            <a href="/categories.html">
                分类
                
                
            </a>
        </li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li>
            <a href="/MyProgram.html">
                我的软件
                
                
            </a>
        </li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li>
            <a href="/questions.html">
                问题
                
                
            </a>
        </li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li>
            <a href="/tags.html">
                标签
                
                
            </a>
        </li>
      	
      
    
  



            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="content">
        
<?xml version="1.0" encoding="utf-8"?>
<div class="page-header">
  <h1>LifeGame
    <small>
      
      
    </small>
  </h1>
</div>

<div class="row-fluid">
  <div class="span9">
    <div id="divPost">
      
      <p>首先本文起因于野比的《生命游戏和细胞自动机的学习笔记》<a href="http://www.cnblogs.com/conmajia/archive/2012/05/31/life-game-note.html">http://www.cnblogs.com/conmajia/archive/2012/05/31/life-game-note.html</a></p>

<p>问野比要源码后并没有达到本人想要的结果，于是想自己实现一个世界，一个生命规则。</p>

<p>游戏源码已上传，文章末尾。</p>

<p>人工智能就算了，虽然本人也很有热情，但是其中没有涉及任何人工智能相关。</p>

<p>倒是有以下几个方面需要普及一下：</p>

<h2>普及知识</h2>

<h3>D20规则</h3>

<p>维基百科传送门：<a href="http://zh.wikipedia.org/wiki/D20%E8%A6%8F%E5%89%87">http://zh.wikipedia.org/wiki/D20%E8%A6%8F%E5%89%87</a></p>

<p>D20规则影响了我很多，有时甚至涉及到现实。</p>

<p>这东西不能细说，有兴趣的可以去奇幻修士会：<a href="http://www.tdsgame.org/">http://www.tdsgame.org/</a></p>

<h3>生命游戏</h3>

<p>维基百科传送门：<a href="http://zh.wikipedia.org/wiki/%E7%94%9F%E5%91%BD%E6%B8%B8%E6%88%8F">http://zh.wikipedia.org/wiki/%E7%94%9F%E5%91%BD%E6%B8%B8%E6%88%8F</a></p>

<p>说起生命游戏，以前在emacs中确实打开过这个游戏。</p>

<h2>程序介绍</h2>

<p><img src="/image/LifeGame/LifeGame_1.jpg" alt="效果图" /></p>

<p>首先，程序没有完成。</p>

<p>因为这个东西不是一个Demo。</p>

<p>程序都是本人一点一点敲出来的，趁着周末。到周一才发现，完全不能从此状态中脱离，这严重影响了心情和工作。所以决定在此将程序发布出来。</p>

<h3>实现目标</h3>

<ul>
<li>细胞有属性：暂时只使用基本的力量、敏捷、智力，属性影响细胞各个方面；</li>
<li>细胞有动作：细胞大多时间在漫步（Wander），但是在有其他细胞攻击自身时，细胞会出于本能的进行反击，由于没有智商（能力），经常会看到两个细胞致死不休的相互攻击。当然细胞也会在周围有其他细胞时主动出击，或者细胞懒得动（休息）；</li>
<li>细胞有视野：细胞所谓的周围（视野）已经不局限与周围8个方格，而是由于时间（白天还是黑夜），自身属性（敏捷影响视野）去决定。例如下面是一个视野为3的细胞。</li>
</ul>


<p><img src="/image/LifeGame/LifeGame_2.jpg" alt="视野" /></p>

<ul>
<li>细胞有能力：可以理解为智商。但是感觉更像是游戏中的技能。例如说细胞在攻击时发现击中要害更致命，那么它以后攻击的时候都会向要害攻击（学会【击中要害】）。这里为了让游戏更有意思，对思考类能力做了特殊处理，比如说细胞学会了【谋而后动】，那么它会在每次行动前，考虑自身、对手、周围细胞等各个因素，然后做一个判断，决定这次应该做什么。学会【走为上策】细胞会在自己自身不利情况逃跑。更甚者学会【知己知彼】还会考虑对手情况。</li>
<li>细胞有状态：标准的如战斗中、逃跑、濒死，战斗状态如被拌摔等（与能力有关）</li>
</ul>


<h3>程序中</h3>

<p>不记得哪里看过，与程序员谈话很舒服，因为说两句就扯回程序了。</p>

<p>前面说了那么多，不谈程序，确实感觉有点不适应。</p>

<h3>能力中使用位运算</h3>

<p>首先在设计状态的时候使用了位运算判断，这也是一个很经典的学习案例：</p>

<p><img src="/image/LifeGame/LifeGame_3.jpg" alt="能力" /></p>

<p>给一个地址：<a href="http://blog.csdn.net/masefee/article/details/5258432">http://blog.csdn.net/masefee/article/details/5258432</a></p>

<p>还有就是在应用程序开发中权限问题也可以解决：<a href="http://www.cnblogs.com/toby/archive/2011/10/23/2221863.html">http://www.cnblogs.com/toby/archive/2011/10/23/2221863.html</a></p>

<p>我为了给每个技能增加【稀有度】，提出一个能力最大值的概念，其实我承认很大程度上是因为我发现智力有点废柴。</p>

<p>每个能力并不全是只有一个1（二进制），如上例中的【击中要害】二进制就有3个1。</p>

<p><em>这里需要说明一下，本身是没有能力类型的（如上面的共计类型），但是发现由于攻击类的能力稀有度低（原本的【奋力一击】是0x00000001【击中要害】是0x01000002），很多细胞同时拥有【奋力一击】和【击中要害】，所以提出了能力类型这个概念，同一个能力类型每个细胞只能拥有两个（不排除给一些思考类能力增加判断替换能力的功能）。</em></p>

<p>当你获得一个新技能的时候，剩余能力值（能力最大值减去已有能力值）不足，则无法获得该技能，这样保证了高智力细胞的优势。</p>

<p>判断能力值的方法来源经典的判断整数二进制中1的个数，也算学有所用。其实完全可以写一个类的，这我知道，而且在能力中暴露出来的问题（比如说通过0x00000001获得【奋力一击】这个能力的名字），也让我考虑将能力封装一个类。但是这都是后话。</p>

<h3>判断视野</h3>

<p>这真是经验不足了。</p>

<p>虽然很喜欢游戏，但是对于游戏编程还是没有过多接触。</p>

<p>本来很简单的一个问题，但是实现的时候还是出了不少问题，最后写下如下代码：</p>

<pre><code>public static List&lt;Point&gt; Within(this Point p, int distance)
{
   List&lt;Point&gt; lstResult = new List&lt;Point&gt;();

   Func&lt;int, List&lt;Point&gt;&gt; func = dis =&gt;
      {
         List&lt;Point&gt; lst = new List&lt;Point&gt;();

         foreach (var item in Enumerable.Range(1, dis))
         {
            if (item != dis)
            {
               lst.Add(p + new Size(item, dis - Math.Abs(item)));
               lst.Add(p + new Size(item, -(dis - Math.Abs(item))));
               lst.Add(p + new Size(-item, dis - Math.Abs(item)));
               lst.Add(p + new Size(-item, -(dis - Math.Abs(item))));
            }
            else
            {
               lst.Add(p + new Size(item, dis - Math.Abs(item)));
               lst.Add(p + new Size(-item, dis - Math.Abs(item)));
               lst.Add(p + new Size(dis - Math.Abs(item), item));
               lst.Add(p + new Size(dis - Math.Abs(item), -item));
            }
         }

         return lst;
      };

   foreach (var item in Enumerable.Range(1, distance))
   {
      lstResult.AddRange(func(item));
   }

   return lstResult;
}
</code></pre>

<p>//把那个func提出来本来以为这里想递归……</p>

<p>哪位大侠帮忙改一下吧。我也感觉看不下去。</p>

<h2>写在后面</h2>

<p>正如前面所说，程序没有写完。</p>

<p>既要追求简单，又想在简单中创造不简单，还是得花费不少时间的。</p>

<p>现在很难再像以前专注于某一个爱好。</p>

<p>我一直都说。</p>

<p>对我来说，选择爱好作为工作是一件痛苦的事情。这让我分不清是在工作还是在游戏。</p>

<p>附上源码：<a href="http://files.cnblogs.com/nanqi/LifeGame.zip">http://files.cnblogs.com/nanqi/LifeGame.zip</a></p>

<p>欢迎交流讨论</p>

<p>秋秋：贰柒伍零玖陆玖陆柒</p>

<p>最后，之所以晚上写博客，是因为写这东西太费时间了。</p>

      

    </div>
    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/blog/2012/07/10/visualcrypto" title="视觉密码(VisualCrypto)">&larr; 上一页</a></li>
      
        <li><a href="/archive.html">列表</a></li>
      
        <li class="next"><a href="/blog/2012/07/26/prolog" title="逻辑思维的Prolog">下一页 &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'nanqi'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
  <div class="span3">
    <h4>Published</h4>
    <div class="date">
      <span>2012-07-24</span>
    </div>

  
    <h4>Tags</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="/tags.html#C#-ref">C# <span>15</span></a></li>
     
    	<li><a href="/tags.html#AI-ref">AI <span>2</span></a></li>
    
  



    </ul>
  
  </div>
</div>


      </div>

      <footer>
        <p>&copy; NanQi 2012 - 2013
          参考 <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          和 <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
          源码托管在 <a href="https://github.com/nanqi">NanQi Github</a> 版权声明 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/">CC BY-NC-SA 3.0</a>
          <script src="http://s95.cnzz.com/stat.php?id=4758074&web_id=4758074" language="JavaScript"></script>
        </p>
      </footer>

    <script src="/assets/themes/twitter/js/jquery.js"></script>
    <script src="/assets/themes/twitter/js/prettify.js"></script>
    <script src="/assets/themes/twitter/js/holder.js"></script>
    <script src="/assets/themes/twitter/bootstrap/js/bootstrap.min.js"></script>
    </div> <!-- /container -->

    <script type="text/javascript">
        $(window).load(function () {
                $("pre").addClass("prettyprint linenums");
                prettyPrint();
        })
    </script>

    
  </body>
</html>

